<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.skylibrary.mappers.questionMapper">

	<select id="list" resultType="questionVO" parameterType="pagingVO">
		SELECT * FROM q 
		ORDER BY questionNo DESC
		LIMIT #{start}, #{end}
	</select>
	<select id="qView" resultType="questionVO" parameterType="questionVO">
		SELECT * FROM q WHERE questionNo = #{questionNo}
	</select>
	<select id="countList" resultType="int">
		SELECT COUNT(*) FROM q
	</select>
	<select id="typeCountList" resultType="int" parameterType="questionVO">
		SELECT COUNT(*) FROM q 
		where questionType = #{questionType}
	</select>
	<select id="selectTypeList"  resultType="questionVO" parameterType="searchVO">
		SELECT * FROM q
		WHERE 1=1
		<if test="#{selectType != 2}">
		AND questionType = #{selectType}
		</if>
		<if test="#{startDate != '' and endDate != ''
			and startDate != null and endDate != null}">
		AND questionDate 
		BETWEEN '#{startDate}' AND '#{endDate}'
		</if>
		ORDER BY questionNo DESC
	</select>
	<update id="typeUpdate" parameterType="questionVO">
		UPDATE q
		SET questionType = 1, questionOkDate=now()
		WHERE questionNo = #{questionNo}
	</update>
	<update id="questionOkDateUpdate" parameterType="questionVO">
		UPDATE q 
		SET questionOkDate = now()
		WHERE questionNo = #{questionNo}
	</update>
	<insert id="questionAdd" parameterType="questionVO">
		insert into q 
		(userID, questionTitle, questionBody)
		value
		(#{userID}, #{questionTitle}, #{questionBody})
	</insert>
	<update id="questionModify" parameterType="questionVO">
		UPDATE q
		SET  questionTitle = #{questionTitle}
			,questionBody = #{questionBody}
		WHERE questionNo = #{questionNo}
	</update>
	<delete id="questionDelete" parameterType="questionVO">
		DELETE FROM q WHERE questionNo = #{questionNo}
	</delete>
	
	
	<!-- manager qna -->
</mapper>