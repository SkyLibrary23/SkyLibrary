<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.skylibrary.mappers.questionMapper">

	<select id="list" resultType="questionVO" parameterType="pagingVO">
		SELECT * FROM q 
		ORDER BY questionNo DESC
		LIMIT #{start}, #{end}
	</select>
	<select id="qView" resultType="questionVO" parameterType="questionVO">
		SELECT * FROM q WHERE questionNo = #{questionNo}
	</select>
	<select id="countList" resultType="int">
		SELECT COUNT(*) FROM q
	</select>
	<select id="typeCountList" resultType="int" parameterType="questionVO">
		SELECT COUNT(*) FROM q 
		where questionType = #{questionType}
	</select>
	<select id="selectTypeList"  resultType="questionVO" parameterType="questionVO">
		SELECT * FROM q
		WHERE 1=1
		<if test="#{questionType != null}">
		AND questionType = #{questionType}
		</if>
		<if test="#{startDate != null and endDate != null}">
		AND questionDate 
		BETWEEN '#{startDate}' AND '#{endDate}'
		</if>
	</select>
	<update id="typeUpdate" parameterType="questionVO">
		UPDATE q
		SET questionType = 1
		WHERE questionNo = #{questionNo}
	</update>

</mapper>